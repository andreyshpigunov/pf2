
— Переносим код метода rewriteAction в processAction. Удаляем rewrieAction.
— Прибиваем передачу управления методу onModule, если он определен в модуле. [Вряд ли это кому-то вообще нужно было хотябы раз. :)]
— Переписать _findHandler: два раза зовем _makeAction_name, странная логика поиска метода по глаголу (например onDEFAULTGET не найдем никогда; а это вообще нужно? :).
— Сделать обработку json'а в postProcess. $result[$.body[hash] $.type[json]] -> pfResponse[$.type[json] $.body[^json:string[$result.body]]] (???)


Как смонитровать моудль в путь с перемеными
-------------------------------------------

Поиск модуля в uri выполняется в _findModule. _findModule берет список модулей и последовательно сравнивает mountTo каждого модуля регулярным выражением «начало строки + mountTo». Как только нашли первое совпадение, выходим из метода и возвращаем объект с найденным модулем.

В _findModule можно сделать проверку по более сложному выражению. Т.е. мы в assignModule компилируем регулярку для mountTo и ищем по ней в _findModule. Останется разобраться как пробросить в экшн переменные из имени модуля, если они там есть.

_findModule должен будет вернуть начало (prefix) и остаток (action) uri. И переменны из префикса.




